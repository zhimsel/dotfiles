#!/bin/bash

cd "$(dirname $0)"

function doIt() {
     source=$(dirname $0)
     echo "Copying from git repo path: $source"
     cd $source
     cp -aP .* ~/
     cd ~
     echo "Installing git submodules"
     git submodule init
     git submodule update
     git submodule foreach git checkout master
     git submodule foreach git pull
     echo "Installin vim plugins
     vim +PluginUpdate +qall
}

if [ "$1" == "--force" -o "$1" == "-f" ]; then
     doIt
else
     read -p "This may overwrite existing files in your home directory. Are you sure? (y/n) " -n 1
     echo ""
     if [[ $REPLY =~ ^[Yy]$ ]]; then
          doIt
     fi
fi
unset doIt;
